---
toc: true
title: "SOLID ì›ì¹™"
date: 2023-05-06
categories: [ architecture, design-pattern ]
---


## Introduction

SOLIDëŠ” Robert C. Martinì´ ì†Œê°œí•œ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ë° ì„¤ê³„ì˜ ì²« ë‹¤ì„¯ ê°€ì§€ ì›ì¹™ì˜ ì•½ìì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ì›ì¹™ì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì‹œê°„ì´ ì§€ë‚˜ë„ ìœ ì§€ ê´€ë¦¬ ë° í™•ì¥ì´ ìš©ì´í•œ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì‰½ê²Œ ê°œë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Single Responsibility Principle (SRP)

ë‹¨ì¼ ì±…ì„ ì›ì¹™ì€ í´ë˜ìŠ¤ëŠ” ë³€ê²½í•´ì•¼ í•  ì´ìœ ê°€ í•˜ë‚˜ë§Œ ìˆì–´ì•¼í•œë‹¤ëŠ” ì´ì•¼ê¸° ì…ë‹ˆë‹¤. ì¦‰, í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì§ë¬´ ë˜ëŠ” ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.

### ì˜ˆì‹œ

- CRUD
    
    ```python
    # Bad
    class User:
        def get_user(self, id):
        pass

        def save_user(self, user):
        pass
    ```
    
    - ê°œì„ 
        
        ì—­í• ì„ ë‚˜ëˆ”. ìœ„ì˜ ê²½ìš° OOP ê´€ì ìœ¼ë¡œë„ ë¬¸ì œê°€ ìˆìŒ. (`user.get_user`?)
        
        ```python
        # Good
        class UserRetriever:
            def get_user(self, id):
            pass
        
        class UserSaver:
            def save_user(self, user):
            pass
        ```
        
- ì±…ê³¼ ì¶œíŒì‚¬
    
    ```python
    # Bad
    class Book:
      id: int
      content: str
      publisher: Publisher
      author: Author
    ```
    
    - ê°œì„ 
        
        `Book` ì˜ identity ë¥¼ êµ¬ë³„í•  ìˆ˜ ìˆëŠ” id, content ì™€ ì´ **ì±…ì„ í¬ê´„í•˜ëŠ” ë‹¤ë¥¸ ìš”ì†Œ** ë“¤ì´ ê°™ì€ ì¸µìœ„ë¡œ ì¡´ì¬í•˜ê³  ìˆëŠ”ë° ì´ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.
        
        ```python
        # Good
        class Meta:
          publisher: Publisher
          author: Author
        
        class Book:
          id: int
          content: str
          meta: Meta
        ```
        
    - ê°œì„  2
        
        Field ê°€ ì‹¤ì œ ì„¸ê³„ì—ì„œ ë‚´í¬í•˜ëŠ” ê°ì²´ê°€ ì•„ë‹ ê²½ìš°(eg. Book **âŠ‚** Author, Book **âŠ‚** Publisher), ë³€í™”ì— ëœ ë¯¼ê°í•˜ë„ë¡ pk ë§Œ ì°¸ì¡°í•˜ë„ë¡ ê°œì„ í•©ë‹ˆë‹¤.
        
        ```python
        # Good
        class Meta:
        	publisher_id: int
        	author_id: int
        
        class Book:
          id: int
          content: str
          meta: Meta
        ```


> ğŸ’¡ í´ë˜ìŠ¤ì˜ í•„ë“œë¥¼ ì¶”ê°€í•  ë•Œ í•´ë‹¹ í´ë˜ìŠ¤ì˜ Direct í•„ë“œë¡œ ì ì ˆí•œì§€ í™•ì¸í•´ë³´ì.

## Open-Closed Principle (OCP)

ê°œë°©-íì‡„ ì›ì¹™ì— ë”°ë¥´ë©´ ì†Œí”„íŠ¸ì›¨ì–´ ì—”í‹°í‹°(í´ë˜ìŠ¤, ëª¨ë“ˆ, í•¨ìˆ˜ ë“±)ëŠ” í™•ì¥ì„ ìœ„í•´ì„œëŠ” ê°œë°©ì ì´ì–´ì•¼ í•˜ì§€ë§Œ ìˆ˜ì •ì„ ìœ„í•´ì„œëŠ” íì‡„ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤.

### ì˜ˆì‹œ

- ë„“ì´ êµ¬í•˜ê¸°
    
    ```python
    # Bad
    class Rectangle:
      def __init__(self, width, height):
        self.width = width
        self.height = height
    
    class Circle:
    	def __init__(self, radius):
    		self.radius
    
    class AreaCalculator:
      def calculate(self, shapes):
        total_area = 0
        for shape in shapes:
          if isinstance(shape, Rectangle):
            total_area += shape.width * shape.height
    			elif isinstance(shape, Rectangle):
    				total_area += shape.radius * shape.radius * 3.14
        return total_area
    ```
    
    - ê°œì„ 
        
        ```python
        # Good
        class Shape:
          def area(self):
            pass
        
        class Rectangle(Shape):
          def __init__(self, width, height):
            self.width = width
            self.height = height
        
          def area(self):
            return self.width * self.height
        
        class Circle(Shape):
          def __init__(self, radius):
            self.radius = radius
          def area(self):
        		return shape.radius * shape.radius * 3.14
        
        class AreaCalculator:
          def calculate(self, shapes):
            return sum(shape.area() for shape in shapes)
        ```


> ğŸ’¡ ë§Œì•½ í™œìš©ë˜ê³  ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ìƒˆë¡œìš´ êµ¬í˜„ì²´ë¥¼ ì¶”ê°€ í–ˆëŠ”ë° í•´ë‹¹ **ì¸í„°í˜ì´ìŠ¤ì˜ í˜¸ì¶œë¶€ë‚˜ ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜ êµ¬í˜„ì„ ìˆ˜ì •(Not closed for modification)ì„ í•´ì•¼í•˜ëŠ” ê²½ìš°** ì´ OCP ì›ì¹™ì„ ì§€í‚¤ê³  ìˆëŠ”ì§€ ì ê²€í•´ë³´ì.

## Liskov Substitution Principle (LSP)

ë¦¬ìŠ¤ì½”í”„ ëŒ€ì²´ ì›ì¹™ì— ë”°ë¥´ë©´ í”„ë¡œê·¸ë¨ì´ ê¸°ë³¸ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° í”„ë¡œê·¸ë¨ì˜ ê¸°ëŠ¥ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ê¸°ë³¸ í´ë˜ìŠ¤ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ íŒŒìƒ í´ë˜ìŠ¤ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆì–´ì•¼í•©ë‹ˆë‹¤.
ë‹¤ì‹œ ë§í•˜ë©´, ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ëª¨ë“  ê¸°ëŠ¥ë“¤ì€ ìì‹ í´ë˜ìŠ¤ì—ì„œ ë™ì‘í•´ì•¼í•©ë‹ˆë‹¤.

### ì˜ˆì‹œ

- ìƒˆ = ë‚˜ëŠ” ìƒˆ?
    
    ```python
    # Bad
    class Bird:
        def fly(self):
            pass
    
    class Ostrich(Bird):
        def fly(self):
            raise NotImplementedError
    ```
    
    - ì¢…ìœ¼ë¡œì˜ ìƒˆ **â‰ ** ë‚˜ëŠ” ìƒˆ
        
        ```python
        # Good
        class Bird:
            pass
        
        class FlyingBird(Bird):
            def fly(self):
                pass
        
        class Ostrich(Bird):
            pass
        ```

> ğŸ’¡ êµ¬í˜„ì´ ë¶ˆê°€ëŠ¥í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ í¬í•¨í•˜ëŠ” ìƒì†ì´ë‚˜ êµ¬í˜„ì„ í•´ì•¼í•  ë•Œ, ë¶€ëª¨í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ì˜ ì •ì˜ê°€ LSP ì›ì¹™ì„ ìœ„ë°°í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ì. ë§Œì•½ ë¬¸ì œë¥¼ í•´ê²°í•˜ë‹¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ê°€ ê»ë°ê¸°ë§Œ ë‚¨ì„ ê²½ìš°[Replace Superclass with Delegate](https://refactoring.com/catalog/replaceSuperclassWithDelegate.html) í•˜ì.

## Interface Segregation Principle (ISP)

ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™ì— ë”°ë¥´ë©´ í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë„ë¡ ê°•ìš”í•´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤. ì¦‰, í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œë¥¼ êµ¬í˜„í•  í•„ìš”ê°€ ì—†ì–´ì•¼ í•œë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.

### ì˜ˆì‹œ

- Robot canâ€™t eat
    
    ```python
    # Bad
    from abc import ABCMeta, abstractmethod
    
    class Worker(metaclass=ABCMeta):
        @abstractmethod
        def work(self):
            pass
    
        @abstractmethod
        def eat(self):
            pass
    
    class Robot(Worker):
        def work(self):
            pass
    
        def eat(self):
            raise NotImplementedError
    ```
    
    - ê°œì„ 
        
        ```python
        # Good
        class Workable(metaclass=ABCMeta):
          @abstractmethod
          def work(self):
            pass
        
        class Eatable(metaclass=ABCMeta):
          @abstractmethod
          def eat(self):
            pass
        
        class Worker(Workable, Eatable):
          def work(self):
            pass
        
          def eat(self):
            pass
        
        class Robot(Workable):
          def work(self):
            pass
        ```

> ğŸ’¡ ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ì„ ì •í•  ë•Œ ê¸°ëŠ¥ë“¤ì„ í¬ê´„ í•  ìˆ˜ ìˆëŠ” ì´ë¦„ì„ ê³ ë¯¼í•´ë³´ì. í˜¹ì‹œ ì ì ˆí•œ ì´ë¦„ì´ ë– ì˜¤ë¥´ì§€ ì•Šê±°ë‚˜ ë„ˆë¬´ ì¼ë°˜ì ì¸ ì´ë¦„ìœ¼ë¡œ í•´ì•¼í•œë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ê³  ì¢€ë” ëª…í™•í•œ ì´ë¦„ì„ ì‚¬ìš©í•´ì„œ ê°€ë…ì„±ì„ ì˜¬ë ¤ë³´ì.

## Dependency Inversion Principle (DIP)

ì¢…ì†ì„± ë°˜ì „ ì›ì¹™ì— ë”°ë¥´ë©´ ìƒìœ„ ë ˆë²¨ ëª¨ë“ˆì€ í•˜ìœ„ ë ˆë²¨ ëª¨ë“ˆì— ì¢…ì†ë˜ì–´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤. ë‘˜ ë‹¤ ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ ì¶”ìƒí™”ëŠ” ì„¸ë¶€ ì‚¬í•­ì— ì˜ì¡´í•´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤. ì„¸ë¶€ ì‚¬í•­ì€ ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ í•©ë‹ˆë‹¤.

### ì˜ˆì‹œ

- Switch ë¡œ Light ì¡°ì ˆí•˜ê¸°
    
    ```python
    class LightBulb:
      def turn_on(self):
        pass
    
      def turn_off(self):
        pass
    
    class ElectricPowerSwitch:
      def __init__(self, l: LightBulb):
        self.lightbulb = l
        self.on = False
    
      def press(self):
        if self.on:
          self.lightbulb.turn_off()
          self.on = False
        else:
          self.lightbulb.turn_on()
          self.on = True
    ```
    
    - ê°œì„ 
        
        ìœ„ ì½”ë“œì—ì„œëŠ” `ElectricPowerSwitch` í´ë˜ìŠ¤ê°€ `LightBulb` í´ë˜ìŠ¤ì™€ ê¸´ë°€í•˜ê²Œ ê²°í•©(Tightly coupling)ë˜ì—ˆìŠµë‹ˆë‹¤. ìŠ¤ìœ„ì¹˜ëŠ” ë‹¤ë¥¸ ì „ìê¸°ê¸°ë„ ì¼œê³  ëŒ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì´ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ `Switchable` ì„ ë„ì…í•´ì„œ ê°œì„ í•©ë‹ˆë‹¤. 
        
        ```python
        # Good
        from abc import ABC, abstractmethod
        
        class Switchable(ABC):
          @abstractmethod
          def turn_on(self):
            pass
        
          @abstractmethod
          def turn_off(self):
            pass
        
        class LightBulb(Switchable):
          def turn_on(self):
            pass
        
          def turn_off(self):
            pass
        
        class ElectricPowerSwitch:
          def __init__(self, s: Switchable):
            self.device = s
            self.on = False
        
          def press(self):
            if self.on:
              self.device.turn_off()
              self.on = False
            else:
              self.device.turn_on()
              self.on = True
        ```

        ê°œì„ ëœ ì½”ë“œì—ëŠ” ì¼œê³  ëŒ ìˆ˜ ìˆëŠ” ëª¨ë“  ì¥ì¹˜ì—ì„œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” `Switchable` ì¸í„°í˜ì´ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤. ì´ì œ `ElectricPowerSwitch` í´ë˜ìŠ¤ëŠ” `LightBulb` í´ë˜ìŠ¤ì—ì„œ ë¶„ë¦¬ë˜ì–´ `Switchable` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ëª¨ë“  ì¥ì¹˜ì—ì„œ ì‘ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        
- Repository íŒ¨í„´
    
    ```python
    class ProblemService:
    	def __init__(self):
    		self.repo = MysqlProblemRepo()
    
    class MysqlProblemRepo:
    	def __init__(self):
    		self.connection = mysql.connnect("...")
    	
    	def get_problem(self, pk: str):
    		self.connection.query("SELECT * from problems")
    ```
    
    Mysql êµ¬í˜„ì²´ì— `ProblemService` ê°€ tightly coupling ë˜ì–´ìˆëŠ” ê±¸ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
    - ê°œì„ 
        
        ```python
        from abc import ABC, abstractmethod
        
        class ProblemRepo(ABC):
          @abstractmethod
          def get_problem(self, pk: str):
            pass
        
        class ProblemService:
        	# ProblemService ì— Repository êµ¬í˜„ì²´ë¥¼ ì£¼ì…
        	def __init__(self, repo: ProblemRepo):
        		self.repo = repo
        
        class RemoteProblemRepo(ProblemRepo):
        	def __init__(self):
        		self.endpoint = "contenthub.mathpresso.net"
        	
        	def get_problem(self, pk: str):
        		# Remote callì„ í†µí•´ Problem ì„ Retreive
        		pass
        
        class MysqlProblemRepo(ProblemRepo):
        	def __init__(self):
        		self.connection = mysql.connnect("...")
        	
        	def get_problem(self, pk: str):
        		self.connection.query("SELECT * from problems")
        
        ```

ì´ê²ƒìœ¼ë¡œ ê°ê°ì— ëŒ€í•œ ê°„ë‹¨í•œ ì˜ˆì œì™€ í•¨ê»˜ SOLID ì›ì¹™ì— ëŒ€í•œ ìš”ì•½ì„ ë§ˆì¹©ë‹ˆë‹¤. ì´ ì›ì¹™ì„ ì¤€ìˆ˜í•˜ë©´ ì½”ë“œì˜ êµ¬ì¡°ì™€ êµ¬ì„±ì„ ê°œì„ í•˜ì—¬ ì´í•´, ìœ ì§€ ê´€ë¦¬ ë° í™•ì¥ì„ ë” ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
